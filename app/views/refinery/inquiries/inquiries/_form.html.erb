<%
  recaptcha =    Refinery::Inquiries.recaptcha_site_key.presence
  attachments =  Refinery::Inquiries.attachments_permitted
  show_privacy = Refinery::Inquiries.show_contact_privacy_link
%>

<% if recaptcha %>
  <% content_for :javascripts do %>
    <%= javascript_include_tag 'https://www.google.com/recaptcha/api.js', async: Rails.env.production?, defer: Rails.env.production? %>
  <% end %>
<% end %>

<%= form_for [refinery, :inquiries, inquiry] do |f| %>
  <%= render :partial => "/refinery/admin/error_messages",
             :locals => {
               :object => inquiry,
               :include_object_name => true
             } %>

  <div class="field">
    <%= f.label :name, :class => 'placeholder-fallback required' %>
    <%= f.text_field :name, :class => 'text', :required => 'required',
      :placeholder => (t('name', :scope => 'activerecord.attributes.refinery/inquiries/inquiry') if Refinery::Inquiries.show_placeholders) %>
  </div>

  <% if Refinery::Inquiries.show_company_field %>
    <div class="field">
      <%= f.label :company, :class => 'placeholder-fallback' %>
      <%= f.text_field :company, :class => 'text company',
        :placeholder => (t('company', :scope => 'activerecord.attributes.refinery/inquiries/inquiry') if Refinery::Inquiries.show_placeholders) %>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :email, :class => 'placeholder-fallback required' %>
    <%= f.email_field :email, :class => 'text email', :required => 'required',
      :placeholder => (t('email', :scope => 'activerecord.attributes.refinery/inquiries/inquiry') if Refinery::Inquiries.show_placeholders) %>
  </div>

  <% if Refinery::Inquiries.show_phone_number_field %>
    <div class="field">
      <%= f.label :phone, :class => 'placeholder-fallback' %>
      <%= f.text_field :phone, :class => 'text phone',
        :placeholder => (t('phone', :scope => 'activerecord.attributes.refinery/inquiries/inquiry') if Refinery::Inquiries.show_placeholders) %>
    </div>
  <% end %>

  <div class='field message_field'>
    <%= f.label :message, :class => 'placeholder-fallback required' %>
    <%= f.text_area :message, :rows => 8, :required => 'required',
      :placeholder => (t('message', :scope => 'activerecord.attributes.refinery/inquiries/inquiry') if Refinery::Inquiries.show_placeholders) %>
  </div>

  <%= render('refinery/inquiries/inquiries/add_attachments', f:f) if attachments %>

  <div class="actions">

    <%= tag.div class: 'g-recaptcha', data: {sitekey: recaptcha} if recaptcha %>

    <%= f.submit 'Send'  %>

    <%= link_to t('.privacy_policy'), "/privacy-policy", :id => "privacy_link" if show_privacy %>
  </div>
<% end %>
